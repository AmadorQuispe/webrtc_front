{"version":3,"sources":["utils/webRTCHandler.js","IndroductionPage/ConnectingButton.js","IndroductionPage/ConnectingButtons.js","store/actions.js","IndroductionPage/IntroductionPage.js","resources/images/logo.png","JoinRoomPage/JoinRoomTitle.js","JoinRoomPage/JoinRoomInputs.js","JoinRoomPage/OnlyWithAudioCheckbox.js","resources/images/check.png","JoinRoomPage/ErrorMessage.js","JoinRoomPage/JoinRoomButtons.js","utils/api.js","JoinRoomPage/JoinRoomContent.js","JoinRoomPage/JoinRoomPage.js","RoomPage/ChatSection/ChatLabel.js","RoomPage/ChatSection/Messages.js","resources/images/sendMessageButton.svg","store/reducer.js","store/store.js","utils/directMessages.js","utils/wss.js","utils/turn.js","RoomPage/ChatSection/NewMessage.js","RoomPage/ChatSection/ChatSection.js","RoomPage/ParticipantsSection/Participants.js","RoomPage/ParticipantsSection/DirectChat/ConversationNotChosen.jsx","RoomPage/ParticipantsSection/DirectChat/MessagesContainer.js","RoomPage/ParticipantsSection/DirectChat/NewMessage.js","RoomPage/ParticipantsSection/DirectChat/DirectChat.js","RoomPage/ParticipantsSection/ParticipantsSection.js","RoomPage/RoomLabel.js","resources/images/camera.svg","resources/images/cameraOff.svg","RoomPage/VideoSection/CameraButton.js","RoomPage/VideoSection/LeaveRoomButton.js","resources/images/mic.svg","resources/images/micOff.svg","RoomPage/VideoSection/MicButton.js","resources/images/switchToScreenSharing.svg","RoomPage/VideoSection/LocalScreenSharingPreview.js","RoomPage/VideoSection/SwitchToScreenSharingButton.js","RoomPage/VideoSection/VideoButtons.js","RoomPage/VideoSection/VideoSection.js","RoomPage/Overlay.js","RoomPage/RoomPage.js","App.js","serviceWorker.js","index.js"],"names":["localStream","ConnectingButton","createRoomButton","buttonText","onClickHandler","buttonClass","className","onClick","ConnectingButtons","history","useNavigate","Actions","SET_IS_ROOM_HOST","SET_CONNECT_ONLY_WITH_AUDIO","SET_ROOM_ID","SET_IDENTITY","SET_SHOW_OVERLAY","SET_PARTICIPANTS","SET_MESSAGES","SET_ACTIVE_CONVERSATION","SET_DIRECT_CHAT_HISTORY","SET_SOCKET_ID","setIsRoomHost","isRoomHost","type","setRoomId","roomId","setShowOverlay","showOverlay","setDirectChatHistory","directChatHistory","IntroductionPage","dispatch","useDispatch","useEffect","src","JoinRoomTitle","titleText","Input","placeholder","value","changeHandler","onChange","JoinRoomInputs","props","roomIdValue","setRoomIdValue","nameValue","setNameValue","event","target","OnlyWithAudioCheckbox","connectOnlyWithAudio","setConnectOnlyWithAudio","alt","ErrorMessage","errorMessage","Button","cancelButton","JoinRoomButtons","handleJoinRoom","navigate","succesButtonText","serverApi","getRoomExits","a","axios","get","response","data","getTURNCredentials","JoinRoomContent","state","useSelector","shallowEqual","useState","setErrorMessage","identity","createRoom","joinRoom","responseMessage","roomExist","full","onlyWithAudio","JoinRoomPage","search","useLocation","URLSearchParams","ChatLabel","Message","author","content","someAuthor","messageCreatedByMe","alignClass","authorText","contentAdditionalStyles","Messages","messages","map","message","i","sameAuthor","initState","participants","activeConversation","socketId","reducer","action","store","configureStore","appendMessageToChatHistory","userSocketId","chatHistory","getState","userChatHistory","find","h","newDirectMessage","isAuthor","messageContent","newUserChatHistory","newChatHistory","filter","socket","connectWithSocketIOServer","io","on","console","log","id","connectedUsers","connUserSocketId","webRTCHandler","emit","receiverSocketId","authorSocketId","appendNewMessageToChatHistory","createNewRoom","onlyAudio","TURNICeServers","fetchTURNCredentials","api","responseData","token","iceServers","defaultConstraints","audio","video","width","height","onlyAudioContrains","getLocalPreviewAndInitRoomConnection","constraints","navigator","mediaDevices","getUserMedia","then","stream","showLocalVideoPreview","catch","err","peers","streams","getConfiguration","turnIceServers","urls","prepareNewPeerConnection","isInitiator","configuration","Peer","initiator","config","channelName","signalPeerData","signal","addStream","messageData","JSON","parse","appendNewMessage","handleSignalingData","removePeerConnection","videoContainer","document","getElementById","videoEl","srcObject","getTracks","forEach","t","stop","removeChild","parentNode","destroy","videosContainer","classList","add","createElement","videoElement","autoplay","muted","onloadedmetadata","play","appendChild","getAudioOnlyLabel","addEventListener","contains","remove","participant","p","style","position","labelContainer","label","innerHTML","toggleScreenShare","isScreenSharingActive","screenSharingStream","switchVideoTracks","socket_id","index","index2","kind","replaceTrack","setMessages","NewMessage","setMessage","sendMessage","length","stringifiedMessageData","stringify","send","e","onKeyDown","key","preventDefault","sendMessageButton","ChatSection","SingleParticipant","lastItem","Participants","ConversationNotChosen","SingleMessage","messageStyling","containerStyling","MessagesContainer","scrollRef","useRef","current","scrollIntoView","behavior","m","ref","DirectChat","getDirectChatHistory","ParticipantsSection","RoomLabel","CameraButton","isLocalVideoDisabled","setIsLocalVideoDisabled","CameraButtonOffImg","CameraButtonImg","isDisabled","getVideoTracks","enabled","LeaveRoomButton","siteUrl","window","location","origin","href","MicButton","isMicMuted","setIsMicMuted","MicButtonOffImg","MicButtonImg","isMuted","getAudioTracks","LocalScreenSharingPreview","localPreviewRef","onladedmetadata","autoPlay","SwitchToScreenSharingButton","setIsScreenSharingActive","setScreenSharingStream","handleScreenShareToggle","getDisplayMedia","SwitchImg","VideoButtons","VideoSection","Overlay","RoomPage","App","path","element","Boolean","hostname","match","container","createRoot","render","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9e522807.chunk.js","sourcesContent":["import { setMessages, setShowOverlay } from '../store/actions';\r\nimport store from '../store/store'\r\nimport { createNewRoom, joinRoom, signalPeerData } from './wss';\r\nimport Peer from 'simple-peer'\r\nimport { fetchTURNCredentials, getTurnIceServers } from './turn';\r\n\r\nconst defaultConstraints = {\r\n    audio: true,\r\n    video: { width: '480', height: '360' }\r\n};\r\n\r\nconst onlyAudioContrains = {\r\n    audio: true,\r\n    video: false\r\n}\r\nlet localStream;\r\nexport const getLocalPreviewAndInitRoomConnection = async (\r\n    isRoomHost,\r\n    identity,\r\n    roomId = null,\r\n    onlyAudio\r\n) => {\r\n    await fetchTURNCredentials();\r\n    const constraints = onlyAudio ? onlyAudioContrains : defaultConstraints;\r\n    navigator.mediaDevices.getUserMedia(constraints)\r\n        .then(stream => {\r\n            console.log('Succesfull receive local stream')\r\n            localStream = stream;\r\n            showLocalVideoPreview(localStream);\r\n            store.dispatch(setShowOverlay(false))\r\n            isRoomHost\r\n                ? createNewRoom(identity, onlyAudio)\r\n                : joinRoom(identity, roomId, onlyAudio);\r\n        })\r\n        .catch(err => {\r\n            console.log('Error ocurred when trying to get an access to local stream');\r\n            console.log(err);\r\n        })\r\n}\r\n\r\nlet peers = {};\r\nlet streams = [];\r\n\r\nconst getConfiguration = () => {\r\n    const turnIceServers = getTurnIceServers();\r\n    if (turnIceServers) {\r\n        return {\r\n            iceServers: [\r\n                { urls: 'stun:stun.l.google.com:19302',},\r\n                { ...turnIceServers }\r\n            ]\r\n        }\r\n    } else {\r\n        return {\r\n            iceServers: [\r\n                { urls: 'stun:stun.l.google.com:19302'}\r\n            ]\r\n        }\r\n    }\r\n\r\n}\r\n\r\nconst messengerChannel = 'messenger';\r\n\r\nexport const prepareNewPeerConnection = (connUserSocketId, isInitiator) => {\r\n    const configuration = getConfiguration();\r\n    peers[connUserSocketId] = new Peer({\r\n        initiator: isInitiator,\r\n        config: configuration,\r\n        stream: localStream,\r\n        channelName: messengerChannel,\r\n    });\r\n    peers[connUserSocketId].on('signal', (data) => {\r\n        const signalData = {\r\n            signal: data,\r\n            connUserSocketId,\r\n        };\r\n        signalPeerData(signalData);\r\n    });\r\n    peers[connUserSocketId].on('stream', (stream) => {\r\n        console.log('new stream came');\r\n        addStream(stream, connUserSocketId);\r\n        streams = [...streams, stream];\r\n    });\r\n\r\n    peers[connUserSocketId].on('data', (data) => {\r\n        const messageData = JSON.parse(data);\r\n        appendNewMessage(messageData);\r\n    });\r\n\r\n}\r\n\r\nexport const handleSignalingData = (data) => {\r\n    peers[data.connUserSocketId].signal(data.signal);\r\n}\r\nexport const removePeerConnection = data => {\r\n    const { socketId } = data;\r\n    const videoContainer = document.getElementById(socketId);\r\n    const videoEl = document.getElementById(`${socketId}-video`);\r\n    if (videoContainer && videoEl) {\r\n        const tracks = videoEl.srcObject.getTracks();\r\n        tracks.forEach(t => t.stop());\r\n        videoEl.srcObject = null;\r\n        videoContainer.removeChild(videoEl);\r\n        videoContainer.parentNode.removeChild(videoContainer);\r\n        if (peers[socketId]) {\r\n            peers[socketId].destroy();\r\n        }\r\n\r\n        delete peers[socketId];\r\n    }\r\n\r\n\r\n}\r\n//////////////////////////// UI VIDEOS ///////////////////////////////////\r\nconst showLocalVideoPreview = (stream) => {\r\n    const videosContainer = document.getElementById('videos_portal');\r\n    videosContainer.classList.add('videos_portal_styles');\r\n    const videoContainer = document.createElement('div');\r\n    videoContainer.classList.add('video_track_container');\r\n    const videoElement = document.createElement('video');\r\n    videoElement.autoplay = true;\r\n    videoElement.muted = true;\r\n    videoElement.srcObject = stream;\r\n    videoElement.onloadedmetadata = () => {\r\n        videoElement.play();\r\n    };\r\n    videoContainer.appendChild(videoElement);\r\n    if (store.getState().connectOnlyWithAudio) {\r\n        videoContainer.appendChild(getAudioOnlyLabel());\r\n    }\r\n    videosContainer.appendChild(videoContainer);\r\n\r\n}\r\n\r\nconst addStream = (stream, connUserSocketId) => {\r\n    const videosContainer = document.getElementById('videos_portal');\r\n    const videoContainer = document.createElement('div');\r\n    videoContainer.id = connUserSocketId;\r\n    videoContainer.classList.add('video_track_container');\r\n    const videoElement = document.createElement('video');\r\n    videoElement.autoplay = true;\r\n    videoElement.srcObject = stream;\r\n    videoElement.id = `${connUserSocketId}-video`;\r\n    videoElement.onloadedmetadata = () => {\r\n        videoElement.play();\r\n    };\r\n    videoElement.addEventListener('click', () => {\r\n        if (videoElement.classList.contains('full_screen')) {\r\n            videoElement.classList.remove('full_screen');\r\n        } else {\r\n            videoElement.classList.add('full_screen');\r\n        }\r\n    });\r\n    videoContainer.appendChild(videoElement);\r\n    const participants = store.getState().participants;\r\n    const participant = participants.find(p => p.socketId === connUserSocketId);\r\n    if (participant?.onlyAudio) {\r\n        videoContainer.appendChild(getAudioOnlyLabel(participant.identity));\r\n    } else {\r\n        videoContainer.style.position = \"static\";\r\n    }\r\n    videosContainer.appendChild(videoContainer);\r\n}\r\n\r\nconst getAudioOnlyLabel = (identity = 'Your') => {\r\n    const labelContainer = document.createElement('div');\r\n    labelContainer.classList.add('label_only_audio_container');\r\n    const label = document.createElement('p');\r\n    label.classList.add('label_only_audio_text');\r\n    label.innerHTML = `Only Audio - ${identity}`;\r\n    labelContainer.appendChild(label);\r\n    return labelContainer;\r\n}\r\n//////////////////////////// BUTTONS LOGIC ///////////////////////////////////\r\nexport const toggleMic = (isMuted) => {\r\n    localStream.getAudioTracks()[0].enabled = isMuted ? true : false;\r\n}\r\n\r\nexport const toggleCamera = isDisabled => {\r\n    localStream.getVideoTracks()[0].enabled = isDisabled ? true : false;\r\n}\r\n\r\nexport const toggleScreenShare = (\r\n    isScreenSharingActive,\r\n    screenSharingStream = null\r\n) => {\r\n    if (isScreenSharingActive) {\r\n        switchVideoTracks(localStream);\r\n    } else {\r\n        switchVideoTracks(screenSharingStream);\r\n    }\r\n}\r\n\r\nexport const switchVideoTracks = stream => {\r\n    for (let socket_id in peers) {\r\n        for (let index in peers[socket_id].streams[0].getTracks()) {\r\n            for (let index2 in stream.getTracks()) {\r\n                if (\r\n                    peers[socket_id].streams[0].getTracks()[index].kind ===\r\n                    stream.getTracks()[index2].kind\r\n                ) {\r\n                    peers[socket_id].replaceTrack(\r\n                        peers[socket_id].streams[0].getTracks()[index],\r\n                        stream.getTracks()[index2],\r\n                        peers[socket_id].streams[0]\r\n                    );\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n//////////////////// Messages //////////////////////////////////\r\nconst appendNewMessage = (messageData) => {\r\n    const messages = store.getState().messages;\r\n    store.dispatch(setMessages([...messages, messageData]));\r\n}\r\n\r\nexport const sendMessageUsingDataChannel = (messageContent) => {\r\n    const identity = store.getState().identity;\r\n    const localMessageData = {\r\n        content: messageContent,\r\n        identity,\r\n        messageCreatedByMe: true\r\n    };\r\n    appendNewMessage(localMessageData);\r\n    const messageData = {\r\n        content: messageContent,\r\n        identity,\r\n    };\r\n    const stringifiedMessageData = JSON.stringify(messageData);\r\n    for (let socketId in peers) {\r\n        console.log(stringifiedMessageData)\r\n        peers[socketId].send(stringifiedMessageData);\r\n    }\r\n}\r\n\r\n/*\r\n  const identity = store.getState().identity;\r\n\r\n  const localMessageData = {\r\n    content: messageContent,\r\n    identity,\r\n    messageCreatedByMe: true,\r\n  };\r\n\r\n  appendNewMessage(localMessageData);\r\n\r\n  const messageData = {\r\n    content: messageContent,\r\n    identity,\r\n  };\r\n\r\n  const stringifiedMessageData = JSON.stringify(messageData);\r\n  for (let socketId in peers) {\r\n    peers[socketId].send(stringifiedMessageData);\r\n  }\r\n*/","const ConnectingButton = ({\r\n    createRoomButton = false,\r\n    buttonText,\r\n    onClickHandler\r\n}) => {\r\n    const buttonClass = createRoomButton\r\n        ? 'create_room_button'\r\n        : 'join_room_button';\r\n    return (\r\n        <button className={buttonClass} onClick={onClickHandler}>\r\n            {buttonText}\r\n        </button>\r\n    );\r\n}\r\n\r\nexport default ConnectingButton;","import ConnectingButton from \"./ConnectingButton\";\r\nimport { useNavigate } from 'react-router-dom'\r\nconst ConnectingButtons = () => {\r\n    let history = useNavigate();\r\n\r\n    const pushToJoinRoomPage = () => {\r\n        history('/join-room')\r\n    }\r\n    const pushToJoinRoomPageAsHost = () => {\r\n        history('/join-room?host=true')\r\n    }\r\n    return (\r\n        <div className=\"connecting_buttons_container\">\r\n            <ConnectingButton\r\n                buttonText='Join a meeting'\r\n                onClickHandler={pushToJoinRoomPage} \r\n            />\r\n            <ConnectingButton\r\n                createRoomButton={true}\r\n                buttonText='Host a meeting'\r\n                onClickHandler={pushToJoinRoomPageAsHost}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ConnectingButtons;","const Actions = {\r\n    SET_IS_ROOM_HOST: 'SET_IS_ROOM_HOST',\r\n    SET_CONNECT_ONLY_WITH_AUDIO: 'SET_CONNECT_ONLY_WITH_AUDIO',\r\n    SET_ROOM_ID: 'SET_ROOM_ID',\r\n    SET_IDENTITY: 'SET_IDENTITY',\r\n    SET_SHOW_OVERLAY:'SET_SHOW_OVERLAY',\r\n    SET_PARTICIPANTS: 'SET_PARTICIPANTS',\r\n    SET_MESSAGES:'SET_MESSAGES',\r\n    SET_ACTIVE_CONVERSATION: 'SET_ACTIVE_CONVERSATION',\r\n    SET_DIRECT_CHAT_HISTORY: 'SET_DIRECT_CHAT_HISTORY',\r\n    SET_SOCKET_ID: 'SET_SOCKET_ID',\r\n}\r\n\r\nexport const setIsRoomHost = (isRoomHost) => ({\r\n    type: Actions.SET_IS_ROOM_HOST,\r\n    isRoomHost,\r\n});\r\n\r\nexport const setConnectOnlyWithAudio = (onlyWithAudio) => ({\r\n    type: Actions.SET_CONNECT_ONLY_WITH_AUDIO,\r\n    onlyWithAudio\r\n});\r\n\r\nexport const setRoomId = (roomId) =>({\r\n    type: Actions.SET_ROOM_ID,\r\n    roomId\r\n});\r\n\r\nexport const setIdentity = (identity) =>({\r\n    type: Actions.SET_IDENTITY,\r\n    identity\r\n});\r\n\r\nexport const setShowOverlay = (showOverlay) => ({\r\n    type: Actions.SET_SHOW_OVERLAY,\r\n    showOverlay\r\n});\r\n\r\nexport const setParticipants = (participants) => ({\r\n    type: Actions.SET_PARTICIPANTS,\r\n    participants\r\n});\r\n\r\nexport const setMessages = messages => ({\r\n    type: Actions.SET_MESSAGES,\r\n    messages\r\n});\r\n\r\nexport const setActiveConversation = (activeConversation) => ({\r\n    type: Actions.SET_ACTIVE_CONVERSATION,\r\n    activeConversation\r\n});\r\n\r\nexport const setDirectChatHistory = directChatHistory => ({\r\n    type: Actions.SET_DIRECT_CHAT_HISTORY,\r\n    directChatHistory\r\n});\r\n\r\nexport const setSocketId = socketId => ({\r\n    type: Actions.SET_SOCKET_ID,\r\n    socketId\r\n})\r\n\r\nexport default Actions;","import React, { useEffect } from 'react';\r\nimport logo from '../resources/images/logo.png';\r\nimport ConnectingButtons from './ConnectingButtons';\r\nimport { useDispatch } from 'react-redux';\r\nimport { setIsRoomHost} from '../store/actions'\r\nimport './IntroductionPage.css'\r\nconst IntroductionPage = ()=> {\r\n    const dispatch = useDispatch();\r\n    \r\n\r\n    useEffect(() => {\r\n      //setIsRoomHostAction(false);\r\n      dispatch(setIsRoomHost(false))\r\n    }, [])\r\n    \r\n    return (  \r\n        <div className='introduction_page_container'>\r\n            <div className='introduction_page_panel'>\r\n                <img src={logo} className ='introduction_page_image'/> \r\n                <ConnectingButtons/> \r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n\r\nexport default IntroductionPage;","export default \"data:image/png;base64,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\"","const JoinRoomTitle = ({ isRoomHost }) => {\r\n    const titleText =  isRoomHost ? 'Host meeting' : 'Join meeting';\r\n    return ( \r\n        <p className=\"join_room_title\">\r\n            { titleText }\r\n        </p>\r\n     );\r\n}\r\n \r\nexport default JoinRoomTitle;","const Input = ({ placeholder, value, changeHandler }) => {\r\n    return (\r\n        <input\r\n            value={value}\r\n            onChange={changeHandler}\r\n            className='join_room_input'\r\n            placeholder={placeholder}\r\n        />\r\n    )\r\n}\r\n\r\nconst JoinRoomInputs = (props) => {\r\n    const { roomIdValue, setRoomIdValue,\r\n        nameValue, setNameValue, isRoomHost } = props;\r\n        \r\n    const handleRoomIdValueChange = (event) => {\r\n        setRoomIdValue(event.target.value);\r\n    }\r\n    const handleNameValueChange = (event) => {\r\n        setNameValue(event.target.value);\r\n    }\r\n    return (\r\n        <div className=\"join_room_inputs_container\">\r\n            {!isRoomHost && (\r\n                <Input\r\n                    placeholder='Enter meeting ID'\r\n                    value={roomIdValue}\r\n                    changeHandler={handleRoomIdValueChange}\r\n                />\r\n            )}\r\n            <Input\r\n                placeholder='Enter your name'\r\n                value={nameValue}\r\n                changeHandler={handleNameValueChange}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default JoinRoomInputs;","import CheckImg from '../resources/images/check.png'\r\nconst OnlyWithAudioCheckbox = ({connectOnlyWithAudio,setConnectOnlyWithAudio}) => {\r\n    const handleConnectionTypeChange = () => {\r\n        setConnectOnlyWithAudio()\r\n    }\r\n    return ( \r\n        <div className=\"checkbox_container\">\r\n            <div className=\"checkbox_connection\" onClick={handleConnectionTypeChange}>\r\n                {connectOnlyWithAudio &&(\r\n                    <img className=\"checkbox_image\" src={CheckImg} alt=\"\"/>\r\n                )}                \r\n            </div>\r\n            <p className=\"checkbox_container_paragraph\">Only Audio</p>\r\n        </div>\r\n\r\n     );\r\n}\r\n \r\nexport default OnlyWithAudioCheckbox;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABiSURBVHgB7ZHBCQAgCEUdpREaoY0boREaoREawQw8hNShFLz04EOHz8MU4OMKIgZKpkTQwrJG6fMNGoRMN52fjMvltI/ryWaJy01Kn7+5k6p3JqTJ5ACLFE2uuUiriezjywAgdcf6AfL4kwAAAABJRU5ErkJggg==\"","const ErrorMessage = ({errorMessage}) => {\r\n    return (  \r\n        <div className=\"error_message_container\">\r\n            {errorMessage && (\r\n                <p className=\"error_message_paragraph\">{errorMessage}</p>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n \r\nexport default ErrorMessage;","import { useNavigate } from \"react-router-dom\";\r\n\r\nconst Button = ({ buttonText, cancelButton = false, onClickHandler }) => {\r\n    const buttonClass = cancelButton\r\n        ? 'join_room_cancel_button'\r\n        : 'join_room_success_button';\r\n    return (\r\n        <button onClick={onClickHandler} className={buttonClass}>\r\n            {buttonText}\r\n        </button>\r\n    )\r\n}\r\nconst JoinRoomButtons = ({ handleJoinRoom, isRoomHost }) => {\r\n    const navigate = useNavigate();\r\n    const succesButtonText = isRoomHost ? 'Host' : 'Join';\r\n    const pushToIntroductionPage = () => {\r\n        navigate('/');\r\n    }\r\n    return (\r\n        <div className=\"join_room_buttons_container\">\r\n            <Button\r\n                buttonText={succesButtonText}\r\n                onClickHandler={handleJoinRoom}\r\n            />\r\n            <Button\r\n                buttonText='Cancel'\r\n                cancelButton\r\n                onClickHandler={pushToIntroductionPage}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default JoinRoomButtons;","import axios from 'axios';\r\n\r\nconst serverApi = 'https://webrtc-back.onrender.com/api';\r\n\r\nexport const getRoomExits = async (roomId) => {\r\n    const response = await axios.get(`${serverApi}/room-exists/${roomId}`);\r\n    return response.data;\r\n}\r\n\r\nexport const getTURNCredentials = async () => {\r\n    const response = await axios.get(`${serverApi}/get-turn-credentials`);\r\n    return response.data;\r\n}","import { useState } from \"react\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport JoinRoomInputs from \"./JoinRoomInputs\";\r\nimport OnlyWithAudioCheckbox from './OnlyWithAudioCheckbox';\r\nimport { setConnectOnlyWithAudio, setIdentity, setRoomId } from '../store/actions'\r\nimport ErrorMessage from \"./ErrorMessage\";\r\nimport JoinRoomButtons from \"./JoinRoomButtons\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { getRoomExits} from '../utils/api'\r\n\r\nconst JoinRoomContent = () => {\r\n    const dispatch = useDispatch();\r\n    const navigate = useNavigate();\r\n    const state = useSelector(state => state, shallowEqual);\r\n    const { isRoomHost, connectOnlyWithAudio } = state;\r\n    const [ roomIdValue, setRoomIdValue ] = useState('');\r\n    const [ nameValue, setNameValue ] = useState('');\r\n    const [ errorMessage, setErrorMessage ] = useState(null)\r\n    const handleConnectOnlyWithAudio = ()=>{\r\n        dispatch(setConnectOnlyWithAudio(!state.connectOnlyWithAudio))\r\n    }\r\n    const handleJoinRoom = async () => {\r\n        dispatch(setIdentity(nameValue));\r\n        if(isRoomHost){\r\n            createRoom();\r\n        }else{\r\n            await joinRoom();\r\n        }\r\n    };\r\n    const joinRoom = async () =>{\r\n        const responseMessage =  await getRoomExits(roomIdValue);\r\n        const { roomExist,full} = responseMessage;\r\n        if(roomExist){\r\n            if(full){\r\n                setErrorMessage('Meeting is full. Please try again later.');\r\n            }else{\r\n                dispatch(setRoomId(roomIdValue));\r\n                navigate('/room');\r\n            }\r\n        }else{\r\n            setErrorMessage('Meeting not found. Check your meeting id.');\r\n        }\r\n    }\r\n    const createRoom = () =>{\r\n        navigate('/room');\r\n    }\r\n    return (\r\n        <>\r\n            <JoinRoomInputs\r\n                roomIdValue={roomIdValue}\r\n                setRoomIdValue={setRoomIdValue}\r\n                nameValue={nameValue}\r\n                setNameValue={setNameValue}\r\n                isRoomHost={ isRoomHost }\r\n            />\r\n            <OnlyWithAudioCheckbox\r\n                connectOnlyWithAudio={ connectOnlyWithAudio }\r\n                setConnectOnlyWithAudio = {handleConnectOnlyWithAudio}\r\n            />\r\n            <ErrorMessage errorMessage={errorMessage}/>\r\n            <JoinRoomButtons\r\n                handleJoinRoom={ handleJoinRoom }\r\n                isRoomHost = { isRoomHost }\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\n\r\n\r\n\r\nexport default JoinRoomContent;","import { useEffect } from 'react';\r\nimport { useDispatch,useSelector } from 'react-redux';\r\nimport { useLocation } from 'react-router-dom'\r\nimport { setIsRoomHost } from '../store/actions';\r\nimport JoinRoomTitle from './JoinRoomTitle';\r\nimport JoinRoomContent from './JoinRoomContent';\r\n\r\nimport './JoinRoomPage.css';\r\n\r\nconst JoinRoomPage = ()=> {\r\n    const dispatch = useDispatch();\r\n\r\n    const state = useSelector( state => state.isRoomHost );\r\n    \r\n    const search = useLocation().search;\r\n\r\n    useEffect(() => {\r\n      const isRoomHost = new URLSearchParams(search).get('host');\r\n      if(isRoomHost){\r\n        dispatch(setIsRoomHost(true));\r\n      }\r\n    }, [])\r\n    \r\n\r\n    return ( \r\n        <div className=\"join_room_page_container\">\r\n            <div className=\"join_room_page_panel\">\r\n                <JoinRoomTitle isRoomHost={ state }/>\r\n                <JoinRoomContent/>\r\n            </div>\r\n        </div>\r\n     );\r\n}\r\n\r\n\r\nexport default  JoinRoomPage ;","import React from 'react'\r\n\r\nexport const ChatLabel = () => {\r\n  return (\r\n    <div className='chat_label_container'>\r\n        <p className='chat_label_paragraph'>Chat</p>\r\n\r\n    </div>\r\n  )\r\n}\r\n","import { useSelector } from 'react-redux'\r\n\r\nconst Message = ({ author, content, someAuthor, messageCreatedByMe }) => {\r\n    const alignClass = messageCreatedByMe\r\n        ? 'message_align_right'\r\n        : 'message_align_left';\r\n    const authorText = messageCreatedByMe\r\n        ? 'You'\r\n        : author;\r\n    const contentAdditionalStyles = messageCreatedByMe\r\n        ? 'message_right_styles'\r\n        : 'message_left_styles';\r\n    return (\r\n        <div className={`message_container ${alignClass}`}>\r\n            {!someAuthor && <p className='message_title'>{authorText}</p>}\r\n            <p className={`message_content ${contentAdditionalStyles}`}>\r\n                {content}\r\n            </p>\r\n        </div>\r\n    )\r\n}\r\nexport const Messages = () => {    \r\n    const {messages} = useSelector( state => state );\r\n    \r\n    return (\r\n        <div className='messages_container'>\r\n            {messages.map((message, i) => {\r\n                const sameAuthor = i>0 && message?.identity === messages[i-1]?.identity\r\n                return (\r\n                    <Message\r\n                        key={`${message.content}${i}`}\r\n                        author={message.identity}\r\n                        content={message.content}\r\n                        someAuthor={sameAuthor}\r\n                        messageCreatedByMe={message.messageCreatedByMe}\r\n                    />\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/sendMessageButton.9add4f6d.svg\";","import Actions from \"./actions\";\r\n\r\nconst initState = {\r\n    identity: '',\r\n    isRoomHost: false,\r\n    connectOnlyWithAudio: false,\r\n    roomId: null,\r\n    showOverlay:true,\r\n    participants:[],\r\n    messages:[],\r\n    activeConversation:null,\r\n    directChatHistory:[],\r\n    socketId:null,\r\n};\r\n\r\nconst reducer = (state = initState, action) => {\r\n    switch (action.type){\r\n        case Actions.SET_IS_ROOM_HOST:\r\n            return {\r\n                ...state,\r\n                isRoomHost:action.isRoomHost,\r\n            };\r\n        case Actions.SET_CONNECT_ONLY_WITH_AUDIO:\r\n            return{\r\n                ...state,\r\n                connectOnlyWithAudio: action.onlyWithAudio,\r\n            };\r\n        case Actions.SET_ROOM_ID:\r\n            return{\r\n                ...state,\r\n                roomId: action.roomId\r\n            };\r\n        case Actions.SET_IDENTITY:\r\n            return {\r\n                ...state,\r\n                identity: action.identity\r\n            };\r\n        case Actions.SET_SHOW_OVERLAY:\r\n            return{\r\n                ...state,\r\n                showOverlay:action.showOverlay\r\n            };\r\n        case Actions.SET_PARTICIPANTS:\r\n            return {\r\n                ...state,\r\n                participants: action.participants\r\n            };\r\n        case Actions.SET_MESSAGES:\r\n            return {\r\n                ...state,\r\n                messages: action.messages\r\n            };\r\n        case Actions.SET_ACTIVE_CONVERSATION:\r\n            return {\r\n                ...state,\r\n                activeConversation: action.activeConversation\r\n            };\r\n        case Actions.SET_DIRECT_CHAT_HISTORY:\r\n            return{\r\n               ...state,\r\n               directChatHistory: action.directChatHistory \r\n            };\r\n        case Actions.SET_SOCKET_ID:\r\n            return {\r\n                ...state,\r\n                socketId : action.socketId\r\n            };        \r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","import { configureStore } from '@reduxjs/toolkit';\nimport reducer from './reducer'\nexport const store = configureStore({\n  reducer: reducer\n});\n\nexport default store;\n","import { setDirectChatHistory } from \"../store/actions\";\r\nimport store from \"../store/store\";\r\n\r\nexport const appendNewMessageToChatHistory = (data) => { \r\n    const { isAuthor,receiverSocketId, authorSocketId } = data;\r\n    if(isAuthor){\r\n        appendMessageToChatHistory(receiverSocketId,data);\r\n    }else{\r\n        appendMessageToChatHistory(authorSocketId,data);\r\n    }\r\n}\r\nconst appendMessageToChatHistory = (userSocketId,data) => {\r\n    /*const chatHistory = [...store.getState().directChatHistory]\r\n    const userChatHistory = chatHistory.find(h => h.socketId === userSocketId);\r\n    if(userChatHistory){\r\n        const newDirectMessage = {\r\n            isAuthor:data.isAuthor,\r\n            messageContent: data.messageContent,\r\n            identity: data.identity,\r\n        }\r\n        const newUserChatHistory = {\r\n            ...userChatHistory,\r\n            chatHistory:[...userChatHistory.chatHistory, newDirectMessage]\r\n        }\r\n        const newChatHistory = [\r\n            ...chatHistory.filter(h => h.socketId !== userSocketId),\r\n            newUserChatHistory\r\n        ]\r\n        console.log(newChatHistory)\r\n        store.dispatch(setDirectChatHistory(newChatHistory));\r\n    }else{\r\n        const newUserChatHistory = {\r\n            socketId: userSocketId,\r\n            chatHistory: [{\r\n                isAuthor:data.isAuthor,\r\n                messageContent: data.messageContent,\r\n                identity: data.identity\r\n            }]\r\n        };\r\n        const newChatHistory = [...chatHistory,newUserChatHistory];\r\n        console.log(newChatHistory)\r\n        store.dispatch(setDirectChatHistory(newChatHistory));\r\n    }*/\r\n    const chatHistory = [...store.getState().directChatHistory];\r\n\r\n    const userChatHistory = chatHistory.find((h) => h.socketId === userSocketId);\r\n  \r\n    if (userChatHistory) {\r\n      const newDirectMessage = {\r\n        isAuthor: data.isAuthor,\r\n        messageContent: data.messageContent,\r\n        identity: data.identity,\r\n      };\r\n  \r\n      const newUserChatHistory = {\r\n        ...userChatHistory,\r\n        chatHistory: [...userChatHistory.chatHistory, newDirectMessage],\r\n      };\r\n  \r\n      const newChatHistory = [\r\n        ...chatHistory.filter((h) => h.socketId !== userSocketId),\r\n        newUserChatHistory,\r\n      ];\r\n  \r\n      store.dispatch(setDirectChatHistory(newChatHistory));\r\n      \r\n    } else {\r\n      const newUserChatHistory = {\r\n        socketId: userSocketId,\r\n        chatHistory: [\r\n          {\r\n            isAuthor: data.isAuthor,\r\n            messageContent: data.messageContent,\r\n            identity: data.identity,\r\n          },\r\n        ],\r\n      };\r\n  \r\n      const newChatHistory = [...chatHistory, newUserChatHistory];\r\n  \r\n      store.dispatch(setDirectChatHistory(newChatHistory));\r\n    }\r\n\r\n}","import io from 'socket.io-client';\r\nimport { setParticipants, setRoomId, setSocketId } from '../store/actions';\r\nimport store from '../store/store';\r\nimport { appendNewMessageToChatHistory } from './directMessages';\r\nimport * as webRTCHandler from './webRTCHandler';\r\n\r\nconst SERVER = 'https://webrtc-back.onrender.com';\r\nlet socket = null;\r\n\r\nexport const connectWithSocketIOServer = () =>{\r\n    socket = io(SERVER);\r\n    socket.on('connect',()=>{\r\n        console.log('successfully connected with socket io server');\r\n        console.log(socket.id);\r\n        store.dispatch(setSocketId(socket.id))\r\n    });\r\n\r\n    socket.on('room-id',(data)=>{\r\n        const { roomId } = data;\r\n        store.dispatch(setRoomId(roomId));\r\n    });\r\n\r\n    socket.on('room-update',(data) => {\r\n        const { connectedUsers } = data;\r\n        store.dispatch(setParticipants(connectedUsers));\r\n    });\r\n\r\n    socket.on('conn-prepare',(data) => {\r\n        const { connUserSocketId } = data;\r\n        webRTCHandler.prepareNewPeerConnection(connUserSocketId,false);\r\n        socket.emit('conn-init',{connUserSocketId});\r\n    });\r\n\r\n    socket.on('conn-signal',data =>{\r\n        webRTCHandler.handleSignalingData(data);\r\n    });\r\n\r\n    socket.on('conn-init',data=>{\r\n        const {connUserSocketId} = data;\r\n        webRTCHandler.prepareNewPeerConnection(connUserSocketId,true);\r\n    });\r\n\r\n    socket.on('user-disconnected', data=>{\r\n        webRTCHandler.removePeerConnection(data);\r\n    });\r\n\r\n    socket.on('direct-message',data => {\r\n        appendNewMessageToChatHistory(data);\r\n    });\r\n}\r\n\r\nexport const createNewRoom = (identity,onlyAudio) => {\r\n    const data = {\r\n        identity,\r\n        onlyAudio,\r\n    };\r\n    socket.emit('create-new-room',data);\r\n}\r\n\r\nexport const joinRoom = (identity,roomId,onlyAudio) => {\r\n    const data = {\r\n        roomId,\r\n        identity,\r\n        onlyAudio\r\n    };\r\n    socket.emit('join-room',data);\r\n}\r\n\r\nexport const signalPeerData = (data) => {\r\n    socket.emit('conn-signal', data);\r\n}\r\n\r\nexport const sendDirectMessage =(data) => {\r\n    socket.emit('direct-message',data);\r\n}","import * as api from './api';\r\n\r\nlet TURNICeServers = null;\r\nexport const fetchTURNCredentials =  async () => {\r\n    const responseData = await api.getTURNCredentials();\r\n    if(responseData.token?.iceServers){\r\n        TURNICeServers = responseData.token?.iceServers;\r\n    };\r\n    return TURNICeServers;\r\n}\r\n\r\nexport const getTurnIceServers = () => {\r\n    return TURNICeServers;\r\n}","import React, { useState } from 'react';\r\nimport sendMessageButton from '../../resources/images/sendMessageButton.svg';\r\nimport * as webRTCHandler from '../../utils/webRTCHandler';\r\n\r\nexport const NewMessage = () => {\r\n    const [message, setMessage] = useState('');\r\n    const handleTextChange = (e) => {\r\n        setMessage(e.target.value);\r\n    }\r\n    const handleKeyPressed = (e) => {\r\n        if(e.key==='Enter'){\r\n            e.preventDefault();\r\n            sendMessage();\r\n        }\r\n    }\r\n\r\n    const sendMessage = () => {\r\n        if(message.length>0){\r\n            webRTCHandler.sendMessageUsingDataChannel(message);\r\n            setMessage('');\r\n        }\r\n    }\r\n    return (\r\n        <div className='new_message_container'>\r\n            <input\r\n                className='new_message_input'\r\n                value={message}\r\n                onChange={handleTextChange}\r\n                placeholder='Type your message...'\r\n                type='text'\r\n                onKeyDown={handleKeyPressed}\r\n            />\r\n            <img\r\n                className='new_message_button'\r\n                src={sendMessageButton}\r\n                onClick={sendMessage}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n","import { ChatLabel } from \"./ChatLabel\";\r\nimport { Messages } from \"./Messages\";\r\nimport { NewMessage } from \"./NewMessage\";\r\n\r\nconst ChatSection = () => {\r\n    return ( \r\n        <div className =\"chat_section_container\">\r\n            <ChatLabel/>\r\n            <Messages/>\r\n            <NewMessage />\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default ChatSection;","import { useDispatch, useSelector } from \"react-redux\";\r\nimport { setActiveConversation } from \"../../store/actions\";\r\n\r\n\r\nconst SingleParticipant = ({ identity, lastItem,participant, socketId }) => {\r\n    const dispatch = useDispatch();\r\n    const handleOpenActiveChatbox = () => {\r\n        if(participant.socketId !== socketId){\r\n            dispatch(setActiveConversation(participant))\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n            <p className=\"participants_paragraph\" onClick={handleOpenActiveChatbox}>{identity}</p>\r\n            {!lastItem && <span className=\"participants_separator_line\"></span>}\r\n        </>\r\n    )\r\n};\r\n\r\n\r\nconst Participants = () => {\r\n    const state = useSelector(state => state);    \r\n    const { participants,socketId } = state;\r\n    return (\r\n        <div className=\"participants_container\">\r\n            {participants.map((participant, i) => (\r\n                <SingleParticipant\r\n                    key={participant.identity}\r\n                    lastItem={participants.length === i + 1}\r\n                    participant={participant}\r\n                    identity={participant.identity}\r\n                    socketId={socketId}\r\n                />\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Participants;","import React from 'react';\r\n\r\nexport const ConversationNotChosen = () => {\r\n  return (\r\n    <div className='conversation_not_chosen_overlay'>\r\n        <p className='conversation_not_chosen_overlay_text'>\r\n            Conversation not chosen\r\n        </p>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect, useRef } from 'react';\r\n\r\nconst SingleMessage = ({ isAuthor, messageContent }) => {\r\n    const messageStyling = isAuthor\r\n        ? \"author_direct_message\"\r\n        : \"receiver_direct_message\";\r\n\r\n    const containerStyling = isAuthor\r\n        ? \"direct_message_container_author\"\r\n        : \"direct_message_container_receiver\";\r\n\r\n    return (\r\n        <div className={containerStyling}>\r\n            <p className={messageStyling}>{messageContent}</p>\r\n        </div>\r\n    )\r\n};\r\n\r\n\r\nexport const MessagesContainer = ({ messages }) => {\r\n    const scrollRef = useRef();\r\n    useEffect(() => {\r\n        if (scrollRef) {\r\n            scrollRef.current.scrollIntoView({ behavior: 'smooth' })\r\n        }\r\n    }, [messages])\r\n    return (\r\n        <div className='direct_messages_container'>\r\n            {messages.map(m =>\r\n            (<SingleMessage\r\n                messageContent={m.messageContent}\r\n                isAuthor={m.isAuthor}\r\n                key={`${m.identity}-${m.messageContent}`}\r\n            />)\r\n            )}\r\n            <div ref={scrollRef}></div>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\nimport sendMessageButton from '../../../resources/images/sendMessageButton.svg'\r\nimport * as wss from '../../../utils/wss'\r\nexport const NewMessage = ({ activeConversation, identity }) => {\r\n    const [message, setMessage] = useState('');\r\n\r\n    const handleTextChange = (e) => {\r\n        setMessage(e.target.value);\r\n    }\r\n\r\n    const handleKeyPressed = (e) => {\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault();\r\n            sendMessage();\r\n        }\r\n    }\r\n\r\n    const sendMessage = () => {\r\n        wss.sendDirectMessage({\r\n            receiverSocketId: activeConversation.socketId,\r\n            identity: identity,\r\n            messageContent: message\r\n        });        \r\n        setMessage('');\r\n    }\r\n\r\n    return (\r\n        <div className='new_message_container new_message_direct_border'>\r\n            <input\r\n                className='new_message_input'\r\n                value={message}\r\n                onChange={handleTextChange}\r\n                placeholder='Type your message'\r\n                type='text'\r\n                onKeyDown={handleKeyPressed}\r\n            />\r\n            <img\r\n                className='new_message_button'\r\n                src={sendMessageButton}\r\n                onClick={sendMessage}\r\n            />\r\n\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport { ConversationNotChosen } from './ConversationNotChosen';\r\nimport { MessagesContainer } from './MessagesContainer';\r\nimport { NewMessage } from './NewMessage';\r\n\r\n\r\nconst getDirectChatHistory = (directChatHistory,socketId=null) => {\r\n    if(!socketId || !directChatHistory){\r\n        return [];\r\n    }else{\r\n        const history = directChatHistory.find(h=>h.socketId === socketId);\r\n        return history ?  history.chatHistory : [];\r\n    }\r\n}\r\n\r\nexport const DirectChat = () => {\r\n    const [messages, setMessages] = useState([]);\r\n    const { activeConversation, directChatHistory,identity } = useSelector(state => state);\r\n    //console.log({ activeConversation, directChatHistory,identity })\r\n    useEffect(() => {\r\n      setMessages(\r\n        getDirectChatHistory(\r\n            directChatHistory,\r\n            activeConversation ? activeConversation.socketId: null\r\n        )\r\n      );\r\n    }, [activeConversation,directChatHistory])\r\n    return (\r\n        <div className='direct_chat_container'>\r\n            <div className='direct_chat_header'>\r\n                <p className='direct_chat_header_paragraph'>\r\n                    {activeConversation ? activeConversation.identity : ''}\r\n                </p>\r\n            </div>\r\n            <MessagesContainer messages={ messages }/>\r\n            <NewMessage \r\n                activeConversation={activeConversation}\r\n                identity={identity}\r\n            />\r\n            {!activeConversation && <ConversationNotChosen/>}\r\n        </div>\r\n    )\r\n}\r\n","import Participants from \"./Participants\";\r\nimport { DirectChat } from \"./DirectChat/DirectChat\";\r\n\r\nconst ParticipantsSection = () => {\r\n    return (\r\n        <div className=\"participants_section_container\">\r\n            <div className=\"participants_label_container\">\r\n                <p className=\"participants_label_paragraph\">PARTICIPANTS</p>\r\n            </div>\r\n            <Participants/>\r\n            <DirectChat/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ParticipantsSection;","const RoomLabel = ({roomId}) => {\r\n    return ( \r\n        <div className=\"room_label\">\r\n            <p className=\"room_label_paragraph\">ID: {roomId}</p>\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default RoomLabel;","export default __webpack_public_path__ + \"static/media/camera.b50348a3.svg\";","export default __webpack_public_path__ + \"static/media/cameraOff.a61d4a02.svg\";","import { useState } from 'react';\r\nimport CameraButtonImg from '../../resources/images/camera.svg';\r\nimport CameraButtonOffImg from '../../resources/images/cameraOff.svg';\r\nimport * as webRTCHandler from \"../../utils/webRTCHandler\";\r\nconst CameraButton = () => {\r\n    const [isLocalVideoDisabled, setIsLocalVideoDisabled] = useState(false);\r\n    const handleCameraButtonPresed = () => {\r\n        webRTCHandler.toggleCamera(isLocalVideoDisabled);\r\n        setIsLocalVideoDisabled(!isLocalVideoDisabled);\r\n    }\r\n\r\n\r\n    return ( \r\n        <div className='video_button_container'>\r\n            <img\r\n                src={isLocalVideoDisabled? CameraButtonOffImg : CameraButtonImg}\r\n                className=\"video_button_image\"\r\n                alt=\"\"\r\n                onClick={handleCameraButtonPresed}\r\n            />\r\n            \r\n        </div>\r\n     );\r\n}\r\n \r\nexport default CameraButton;","const LeaveRoomButton = () => {\r\n    const handleRoomDisconnection = () => {\r\n        const siteUrl = window.location.origin;\r\n        window.location.href = siteUrl;\r\n    }\r\n    return (\r\n        <div className=\"video_button_container\">\r\n            <button className=\"video_button_end\" onClick={handleRoomDisconnection}>\r\n                Leave Room\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LeaveRoomButton;","export default __webpack_public_path__ + \"static/media/mic.c9c9788e.svg\";","export default __webpack_public_path__ + \"static/media/micOff.3a72f682.svg\";","import { useState } from \"react\";\r\nimport MicButtonImg from '../../resources/images/mic.svg';\r\nimport MicButtonOffImg from '../../resources/images/micOff.svg';\r\nimport * as webRTCHandler from \"../../utils/webRTCHandler\";\r\n\r\nconst MicButton = () => {\r\n    const [isMicMuted, setIsMicMuted] = useState(false);\r\n    const handleMicButtonPresed = () =>{\r\n        webRTCHandler.toggleMic(isMicMuted);\r\n        setIsMicMuted(!isMicMuted);        \r\n    };\r\n    return ( \r\n        <div>\r\n            <img\r\n                src={isMicMuted ? MicButtonOffImg: MicButtonImg}\r\n                onClick={handleMicButtonPresed}\r\n                className=\"video_button_image\"\r\n                alt=\"\"\r\n            />\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default MicButton;","export default __webpack_public_path__ + \"static/media/switchToScreenSharing.900d9338.svg\";","import { useEffect, useRef } from \"react\";\r\n\r\nconst LocalScreenSharingPreview = ({ stream }) => {\r\n    const localPreviewRef = useRef();\r\n    useEffect(() => {\r\n      const video = localPreviewRef.current;\r\n      video.srcObject = stream;\r\n      video.onladedmetadata = () =>{\r\n          video.play();\r\n      }\r\n    }, [stream])\r\n    \r\n    return ( \r\n        <div className=\"local_screen_share_preview\">\r\n            <video muted autoPlay ref={localPreviewRef}></video>\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default LocalScreenSharingPreview;","import { useState } from 'react';\r\nimport SwitchImg from '../../resources/images/switchToScreenSharing.svg';\r\nimport LocalScreenSharingPreview from './LocalScreenSharingPreview';\r\nimport * as webRTCHandler from '../../utils/webRTCHandler';\r\nconst constraints = {\r\n    audio: false,\r\n    video: true,\r\n}\r\nconst SwitchToScreenSharingButton = () => {\r\n    const [isScreenSharingActive, setIsScreenSharingActive] = useState(false);\r\n    const [screenSharingStream, setScreenSharingStream] = useState(false);\r\n\r\n    const handleScreenShareToggle = async () => {\r\n        if (!isScreenSharingActive) {\r\n            let stream = null;\r\n            try {\r\n                stream = await navigator.mediaDevices.getDisplayMedia(constraints);\r\n\r\n            } catch (error) {\r\n                console.log('Error occurred when trying to get an access to screen share stream');\r\n\r\n            }\r\n            if (stream) {\r\n                setScreenSharingStream(stream);\r\n                webRTCHandler.toggleScreenShare(isScreenSharingActive,stream);\r\n                setIsScreenSharingActive(true);\r\n            } else {\r\n                webRTCHandler.toggleScreenShare(isScreenSharingActive);\r\n                setIsScreenSharingActive(false);\r\n                screenSharingStream.getTracks().forEach(t => t.stop());\r\n                setScreenSharingStream(null);\r\n            }\r\n        }\r\n        setIsScreenSharingActive(!isScreenSharingActive);\r\n    }\r\n    return (\r\n        <>\r\n            <div className='video_button_container'>\r\n                <img\r\n                    src={SwitchImg}\r\n                    onClick={handleScreenShareToggle}\r\n                    className='video_button_image'\r\n                    alt=\"\"\r\n                />\r\n            </div>\r\n            {isScreenSharingActive && (\r\n                <LocalScreenSharingPreview stream={screenSharingStream}/>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default SwitchToScreenSharingButton;","import { useSelector } from \"react-redux\";\r\nimport CameraButton from \"./CameraButton\";\r\nimport LeaveRoomButton from \"./LeaveRoomButton\";\r\nimport MicButton from \"./MicButton\";\r\nimport SwitchToScreenSharingButton from \"./SwitchToScreenSharingButton\";\r\n\r\nconst VideoButtons = () => {\r\n    const { connectOnlyWithAudio } = useSelector( state => state );\r\n    \r\n    return ( \r\n        <div className=\"video_buttons_container\">\r\n            <MicButton/>\r\n            {!connectOnlyWithAudio && <CameraButton/>}\r\n            <LeaveRoomButton/>\r\n            {!connectOnlyWithAudio && <SwitchToScreenSharingButton/>}\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default VideoButtons;","import VideoButtons from \"./VideoButtons\";\r\n\r\nconst VideoSection = () => {\r\n    return ( \r\n        <div className=\"video_section_container\">\r\n           <VideoButtons/> \r\n        </div>\r\n     );\r\n}\r\n \r\nexport default VideoSection;","const Overlay = () => {\r\n    return ( \r\n        <div className=\"overlay_container\">\r\n            <div className=\"loader\">\r\n\r\n            </div>\r\n\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default Overlay;","import { useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport ChatSection from \"./ChatSection/ChatSection\";\r\nimport ParticipantsSection from \"./ParticipantsSection/ParticipantsSection\";\r\nimport RoomLabel from \"./RoomLabel\";\r\nimport VideoSection from \"./VideoSection/VideoSection\";\r\nimport * as webRTCHandler from '../utils/webRTCHandler';\r\nimport Overlay from \"./Overlay\";\r\nimport \"./RoomPage.css\";\r\n\r\nfunction RoomPage() {\r\n    console.log('room page')\r\n    const state = useSelector(state => state);\r\n    const { roomId,\r\n        identity,\r\n        isRoomHost,\r\n        showOverlay,\r\n        connectOnlyWithAudio } = state;\r\n    useEffect(() => {\r\n        if (!isRoomHost && !roomId) {\r\n            const siteUrl = window.location.origin;\r\n            window.location.href = siteUrl;\r\n        } else {\r\n            webRTCHandler.getLocalPreviewAndInitRoomConnection(\r\n                isRoomHost, identity, roomId, connectOnlyWithAudio\r\n            );\r\n        }\r\n\r\n    }, [])\r\n    return (\r\n        <div className=\"room_container\">\r\n            <ParticipantsSection />\r\n            <VideoSection />\r\n            <ChatSection />\r\n            <RoomLabel roomId={roomId} />\r\n            {showOverlay && <Overlay />}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RoomPage;","import React, { useEffect } from 'react';\n//import logo from './logo.svg';\nimport {BrowserRouter as Router,Routes,Route} from 'react-router-dom'\nimport IntroductionPage from './IndroductionPage/IntroductionPage';\nimport JoinRoomPage from './JoinRoomPage/JoinRoomPage';\nimport RoomPage from './RoomPage/RoomPage';\nimport { connectWithSocketIOServer } from './utils/wss';\nimport './App.css';\n\nfunction App() {\n  useEffect(() => {\n    connectWithSocketIOServer();\n  }, []);\n  return (\n    <Router>\n      <Routes>\n        <Route path='/join-room' element ={< JoinRoomPage/>}/>\n        <Route path='/room' element ={< RoomPage/>}/>\n        <Route path='/' element ={< IntroductionPage/>}/>\n      </Routes>\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport { createRoot } from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport { store } from './store/store';\nimport { Provider } from 'react-redux';\nimport * as serviceWorker from './serviceWorker';\n\n/*ReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);*/\n\n\n\n\nconst container = document.getElementById('root');\nconst root = createRoot(container); // createRoot(container!) if you use TypeScript\nroot.render(\n  \n    <Provider store={store}>\n      <App />\n    </Provider>\n  \n);\nserviceWorker.unregister();\n"],"sourceRoot":""}